<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Title dynamique avec fallback -->
    <title><%= typeof title !== 'undefined' ? title : 'NIRD | Plateforme Éducative' %></title>
    
    <!-- Favicon (évite 404) -->
    <link rel="icon" href="data:,">

    <!-- CSS externes -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- CSS locaux (seulement ceux qui existent) -->
    <% if (typeof pageCSS !== 'undefined' && pageCSS) { %>
        <link rel="stylesheet" href="/css/<%= pageCSS %>.css">
    <% } %>
</head>

<body class="<%= typeof bodyClass !== 'undefined' ? bodyClass : 'bg-light min-vh-100' %>">
    
    <!-- Header (conditionnel) -->
    <% if (typeof showHeader === 'undefined' || showHeader) { %>
        <%- include('../partials/header') %>
    <% } %>

    <!-- Contenu principal -->
    <main>
        <%- body %>
    </main>

    <!-- Footer (conditionnel) -->
    <% if (typeof showFooter === 'undefined' || showFooter) { %>
        <%- include('../partials/footer') %>
    <% } %>

    <!-- Scripts externes -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Scripts locaux (seulement si spécifiés) -->
    <% if (typeof pageJS !== 'undefined' && pageJS) { 
        const scripts = Array.isArray(pageJS) ? pageJS : [pageJS];
        scripts.forEach(script => { %>
            <script src="/js/<%= script %>.js"></script>
        <% }); 
    } %>
</body>

</html>
